{"version":3,"sources":["../../../src/editor/StickyWrapper.tsx","../../../src/components/BlurGate.tsx","../../../src/Provider/index.tsx","../../../../src/components/HotKey/Decorator.tsx","../../../../src/components/Editable/FallbackDropArea.tsx","../../../../../src/components/Cell/ErrorCell/index.tsx","../../../../../src/components/Cell/Draggable/index.tsx","../../../../src/helper/throttle/index.ts","../../../../src/service/logger/index.ts","../../../../src/service/hover/index.ts","../../../../src/service/hover/input.ts","../../../../../../src/components/Cell/Droppable/helper/dnd.ts","../../../../../src/components/Cell/Droppable/index.tsx","../../../../../src/components/Row/Droppable/index.tsx","../../../../src/components/Row/index.tsx","../../../../../src/components/Cell/Layout/index.tsx","../../../../../src/components/Cell/Rows/index.tsx","../../../../../src/components/Cell/Inner/index.tsx","../../../../../src/components/Cell/Resizable/helper.ts","../../../../../src/components/Cell/Resizable/index.tsx","../../../../src/components/Cell/index.tsx","../../../../../src/components/Editable/Inner/index.tsx","../../../../src/components/Editable/index.tsx","../../../src/editor/EditableEditor.tsx","../../src/index.tsx"],"names":["a","console","rows","matrix","length","cells","isLayoutMode","isInsertMode","firstElementInViewPortref","el","topOffset","window","shouldCreateFallbackCell","current"],"mappings":"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E,GAAI,EAAE,IACzD,CAAC,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,IACzD,CAAC,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,IACzD,CAAC,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,IACzD,CAAC,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,IACzD,CAAC,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,IACzD,CAAC,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,IACzD,CAAC,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,KAEzD,kBAAiB,CACjB,CAAC,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,IACzD,CAAC,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,IACzD,CAAC,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,IACzD,CAAC,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,IACzD,CAAC,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,IACzD,CAAC,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,IACzD,CAAC,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,IACzD,CAAC,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,IACzD,CAAC,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,IACzD,CAAC,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,MAkDvD,EAAO,CAAE,QAAS,KAAM,kBAAmB,MAE3C,EAAe,SACnB,EACA,EACA,EACA,EAWA,G,IAVE,EAAI,OACJ,EAAK,QACL,EAAM,SACN,EAAS,YASL,EA1DoB,SAAC,G,IAC3B,EAAI,OACJ,EAAS,EAAH,OAKAC,EAAOC,EAAOC,OACdC,EAAQF,EAAO,GAAGC,OAKtB,MAAK,CACL,EAJe,EAAK,MAAQ,EAK5B,EAJe,EAAK,OAAS,GA+CjB,CAAa,CAAE,KAAI,EAAE,OAAM,IACnC,EAlCyB,SAAC,G,IAChC,EAAK,QACL,EAAK,QAIY,MAAC,CACd,KAAE,KAAK,MAAM,EAAM,EAAI,EAAM,GACjC,IAAK,KAAK,MAAM,EAAM,EAAI,EAAM,IA0Bd,CAAkB,CAAE,MAAK,EAAE,MAAK,IAC5C,EAAO,EAAO,OACd,EAAQ,EAAO,GAAG,OAEpB,EAAU,KAAO,EACf,EAAM,IAAM,EAAO,EACd,EAAU,IAAM,IACzB,EAAU,IAAM,GAGd,EAAU,MAAQ,EACpB,EAAU,KAAO,EAAQ,EAChB,EAAU,KAAO,IAC1B,EAAU,KAAO,GAGjB,IAAI,EAAO,EAAO,EAAU,KAAK,EAAU,MAC3C,GAAG,EAAU,GAAb,CAaF,IAAM,EAAM,CACV,KAAM,EAAK,GACX,MAAO,EAAM,GACb,QAAO,EACP,IAAK,CACH,KAAI,EACJ,MAAK,EACL,SAAU,EACV,KAAM,CAAE,KAAI,EAAE,MAAK,GACnB,MAAK,IAGP,IAAE,YAAW,EAAK,EAAK,IAKvB,OAFA,EAAG,GAAK,EAEH,EAAU,GAAM,EAAM,EAAO,EAAS,CAC3C,KAAI,EACJ,MAAK,EACL,SAAU,EACV,KAAM,CAAE,KAAI,EAAE,MAAK,GACf,MAAC,SAlCL,EAAO,MAAM,6BAA8B,CACzC,KAAI,EACJ,MAAK,EACL,OAAM,EACN,MAAK,EACL,UAAS,EACH,KAAF,EACJ,MAAK,KAkCE,GAAwB,SAAC,G,IACpC,EAAK,QACL,EAAQ,WACR,EAAK,QAKC,MAAD,CACD,EAAD,KAAK,MAAM,EAAM,EAAI,EAAS,KAAO,EAAM,GAC9C,EAAG,KAAK,MAAM,EAAM,EAAI,EAAS,IAAM,EAAM,KAMlC,GAAe,SAAC,G,IAC3B,EAAI,OACJ,EAAM,SACN,EAAQ,WAMN,GAAE,GAAuB,GAAd,EAAS,GACpB,OAAO,KAAK,MAAM,GAAY,EAAO,IAMrC,IAHA,IACI,EAAQ,CAAC,GACX,EAFU,EAAsB,GAAd,EAAS,GAGtB,EAAI,EAAG,GAAK,EAAQ,IAGvB,GAFA,EAAE,KAAK,EAAM,GAAK,EAAU,GAC5B,GAAO,EACP,GAAY,EAAM,GAAS,EAAJ,GAAS,EAAW,EAAM,EAAI,GAAe,GAAT,EAAI,GACjE,OAAO,EAIT,OAAK,GAcI,GAAoB,SAC/B,EAaA,G,IAZE,EAAK,QACL,EAAQ,WACR,EAAK,QACL,EAAK,QACL,EAAK,aAQP,QAAI,GAAJ,GAEE,IAAI,EAAI,GAAsB,CAAE,MAAK,EAAE,SAAQ,EAAE,MAAK,IAAI,EACxD,EAAK,GAAa,CAAE,KAAM,EAAM,EAAG,SAAU,EAAG,OAAQ,IAE1D,OAAE,YAAM,GAED,GAKL,EAAM,QAAiB,IAAP,IACd,EAAC,GAGA,EAAM,EAAQ,EAAK,IAQtB,GAAkB,SACtB,EAaA,G,IAZE,EAAK,QACL,EAAK,QACL,EAAK,QACL,EAAQ,WACR,EAAK,aAQP,QAAI,GAAJ,GAEE,IAAI,EAAI,GAAsB,CAAE,MAAK,EAAE,SAAQ,EAAE,MAAK,IAAI,EACxD,EAAK,GAAa,CAAE,KAAM,EAAM,EAAG,SAAU,EAAG,OAAQ,IAE1D,OAAE,YAAM,GAED,GAKL,EAAM,QAAiB,IAAP,IACd,EAAC,GAGA,EAAM,EAAQ,EAAK,IAGtB,GAAe,SAAC,GAAgB,OAAE,YAAM,IAAU,EAAM,OAAS,EAAjC,GAKzB,KAAgB,MAC1B,EAAE,IAAK,SAAC,EAAY,EAAa,GAAyB,SAAlB,YAGzC,EAAC,EAAE,IAAK,SACN,EACA,EACA,EAEA,G,IAFE,EAAM,SAAE,EAAK,QAIT,EAAQ,GAAsB,GAC9B,EAAQ,GAAa,GAE3B,GAAI,EAAM,EAAI,EAAM,EAClB,OAAO,EAAO,EAAM,EAAO,GAG7B,EAAM,EAAM,EAAO,IAGrB,EAAC,EAAE,IAAK,SACN,EACA,EACA,EAEA,G,IAFE,EAAO,UAAE,EAAK,QAIV,EAAQ,GAAsB,GAC9B,EAAQ,GAAa,GAEzB,GAAE,EAAM,EAAI,EAAM,EACd,OAAG,EAAQ,EAAM,EAAO,GAG9B,EAAM,EAAM,EAAO,IAGrB,EAAC,EAAE,IAAK,SACN,EACA,EACA,EAEA,G,IAFE,EAAO,UAAE,EAAK,QAIV,EAAQ,GAAsB,GAC9B,EAAQ,GAAa,GAE3B,GAAI,EAAM,EAAI,EAAM,EAClB,OAAO,EAAQ,EAAM,EAAO,GAE9B,EAAM,EAAM,EAAO,IAGrB,EAAC,EAAE,IAAK,SACN,EACA,EACA,EAEA,G,IAFE,EAAM,SAAE,EAAK,QAIT,EAAQ,GAAsB,GAC9B,EAAQ,GAAa,GAE3B,GAAI,EAAM,EAAI,EAAM,EAClB,OAAO,EAAO,EAAM,EAAO,GAE7B,EAAM,EAAM,EAAO,IAIrB,EAAC,EAAE,IAAK,SAAC,EAAY,EAAa,IAEhC,EAFuC,SAEjC,EAAM,EADE,GAAa,KAG7B,EAAC,EAAE,IAAK,SAAC,EAAY,EAAa,IAEhC,EAFuC,SAEjC,EAAM,EADE,GAAa,KAI7B,EAAC,EAAE,IAAK,SAAC,EAAY,EAAa,IAEhC,EAFwC,UAEjC,EAAM,EADC,GAAa,KAG7B,EAAC,EAAE,IAAK,SAAC,EAAY,EAAa,IAEhC,EAFyC,WAEjC,EAAM,EADA,GAAa,KAK7B,EAAC,EAAE,IAAK,SAAC,EAAY,EAAa,EAAsB,GACtD,SADuC,SAErC,EACA,EACA,GAAe,OAER,GAAG,CACN,MAAO,EACP,MAAO,EAAM,OAAO,SAEtB,KAGN,EAAC,EAAE,IAAK,SAAC,EAAY,EAAa,EAAsB,GACtD,SADuC,SAErC,EACA,EACA,GAAe,OACV,GAAG,CACN,MAAK,EACL,MAAO,EAAM,OAAO,WAI1B,EAAC,EAAE,IAAK,SAAC,EAAY,EAAa,EAAuB,GACvD,SADwC,UAEtC,EACA,EACA,GAAiB,OAEV,GAAG,CACN,MAAK,EACL,MAAO,EAAM,OAAO,QAEtB,KAGN,EAAC,EAAE,IAAK,SAAC,EAAY,EAAa,EAAwB,GACxD,SADyC,WAEvC,EACA,EACA,GAAiB,OACZ,GAAG,CACN,MAAK,EACL,MAAO,EAAM,OAAO,WAK1B,EAAC,EAAE,IAAK,SAAC,EAAY,EAAa,G,IAAE,EAAU,aAAE,EAAM,SACpD,IAAI,YAAM,KAAS,YAAM,GAAzB,CAGQ,MAA+B,EAAzB,OAAE,EAAuB,EAAL,mBAC1B,EAA4D,EAAL,QAA5C,cAA0C,GAAE,GAAP,OAA3B,cAAyB,GAAE,GAAP,aACjD,OAAI,UADqC,OAAQ,IAI7C,GAAsB,IAAuB,EAAK,IAIpD,GACA,IAAuB,EAAK,IACZ,SAAhB,EAAK,OARE,EAAO,EAAM,EAAO,QAa7B,EAAW,EAAM,KAGnB,EAAC,EAAE,IAAK,SAAC,EAAY,EAAa,G,IAAE,EAAW,cAAE,EAAO,UACtD,IAAI,YAAM,KAAS,YAAM,GAAzB,CAGQ,MAA+B,EAAzB,OAAE,EAAuB,EAAL,mBAC1B,EAA4D,EAAL,QAA5C,cAA0C,GAAE,GAAP,OAA3B,cAAyB,GAAE,GAAP,aACjD,OAAI,UADqC,OAAQ,IAI7C,GAAsB,IAAuB,EAAK,IAIpD,GACA,IAAuB,EAAK,IACZ,UAAhB,EAAK,OARE,EAAQ,EAAM,EAAO,QAa9B,EAAY,EAAM,KAErB,GC/iBK,GAAe,ID2jBrB,WAIE,WACE,G,IAAA,aAA6C,GAAuB,EAAlE,EAAQ,WAAE,EAAS,YAJvB,eAA0B,GAC1B,cAAuB,EAKrB,KAAK,SAAW,GAAY,KAAK,SACjC,KAAK,UAAY,GAAa,KAAK,UA0BvC,OAvBE,2BACE,EACA,EACA,EACA,G,IACE,EAAI,OACJ,EAAK,QACL,WAAQ,OAAG,MAAG,QAAO,EAGvB,OAAO,EACL,EACA,EACA,EACA,CACE,KAAI,EACJ,MAAK,EACL,OAAQ,KAAK,SAAS,GACtB,UAAW,KAAK,WAElB,IAGN,EAlCA,ICzjBM,GAA6B,SACjC,EACA,EACA,EACA,EACA,EACA,GAEE,IAAI,EAAgB,EAAQ,kBAExB,EAAoB,EAAQ,wBAC5B,EAAa,CACjB,OAAQ,EAAkB,OAAS,EAAkB,IACrD,MAAO,EAAkB,MAAQ,EAAkB,MAG/C,EAAgB,CACpB,EAAG,EAAc,EAAI,EAAkB,IACvC,EAAG,EAAc,EAAI,EAAkB,MAGzC,GAAa,MAAM,EAAM,EAAO,EAAS,CAAE,KAAI,EAAE,MAAK,EAAE,OAAQ,KCb9D,GAA4C,CAAE,QAAS,GAAI,OAAQ,IAEjE,GAAc,SAAC,EAAiB,GAClC,OAAE,IAAY,GAAK,SAAW,IAAW,GAAK,UAG9C,GAAK,CAAE,QAAO,EAAE,OAAM,IACjB,IAGI,GAAU,KACrB,SACE,EACA,EACA,EACA,G,UAEM,EAAiB,EAAQ,UAC7B,GAAG,EAKH,GAAE,EAAK,KAAK,KAAO,EAAO,IAMrB,GAAK,EAAQ,OAAO,CAAE,SAAS,IAG/B,GAAI,EAAO,UAAU,MAAK,SAAC,GAAM,SAAE,KAAO,EAAK,KAAd,MAClC,GAAY,EAAO,GAAI,EAAK,KAAK,KACnC,EAAQ,aAGL,GAAK,EAAO,GAAZ,CAMP,GAAO,CAAE,QAAS,EAAO,GAAI,OAAQ,EAAK,KAAK,IAC7C,IAAI,EAC8D,QADzC,GACvB,YAAM,KAAkC,QAA3B,EAAmB,QAAnB,EAAU,OAAN,QAAM,IAAN,OAAM,EAAN,EAAQ,eAAO,eAAE,cAAM,eAAE,8BAAsB,UDXjC,SACrC,EACA,EACA,EACA,EACA,EACA,2BAEA,GACE,EACA,EACA,EACA,EACA,EACA,GCDA,CACE,EACA,EAAK,KACL,EACA,EACA,EACA,SAAQ,EAAwB,GAAK,oBAdrC,EAAO,KAAK,mCAAoC,EAAQ,QAdpD,GAAY,EAAO,GAAI,EAAK,KAAK,KACnC,EAAQ,UA8Bd,EACA,CAAE,SAAS,IAGA,GAAS,SACpB,EACA,EACA,EACA,G,UAEM,EAAiB,EAAQ,UAG/B,IAAI,EAAQ,WAAc,EAAQ,OAAO,CAAE,SAAS,IAG7C,GAAI,EAAK,KAAK,KAAO,EAAW,GAIhC,GAAI,EAAW,UAAU,MAAK,SAAC,GAAM,SAAE,KAAO,EAAK,KAAd,MAE1C,EAAQ,qBAFH,CAMP,GAAO,CAAE,QAAS,EAAW,GAAI,OAAQ,EAAK,KAAK,IAEnD,IAAM,EAEiD,QAF5B,GACvB,YAAM,KACqB,QADV,EACE,QADF,EACP,OAAV,QAAU,IAAV,OAAU,EAAV,EAAY,eAAO,eAAE,cAAM,eAAE,8BAAsB,UDtEjB,SACtC,EACA,EACA,EACA,EACA,EACA,2BAEO,GACL,EACA,EACA,EACA,EACA,EACA,GC0DF,CACE,EACA,EAAK,KACL,EACA,EACA,EACA,SAAQ,EAAwB,GAAK,oBApBrC,EAAQ,kB,4RC5EC,GAAc,SAAC,GAC1B,IAAM,EAAM,SAA6B,MACnC,EAAO,YAAQ,GACf,EAAe,cACf,EAAc,cACX,EAAH,GAAc,YAA8B,CAChD,OAAQ,OACR,QAAS,SAAC,GACR,OACE,EAAK,KAAK,KAAO,EAAK,KACrB,EAAK,UAAU,MAAK,SAAC,GAAM,SAAE,KAAO,EAAK,KAAd,OAG5B,MAAC,SAAC,EAAM,GACV,GAAQ,EAAM,EAAS,EAAI,QAAS,IAElC,KAAE,SAAC,EAAM,GACX,GAAO,EAAM,EAAS,EAAI,QAAS,MAErC,GAdc,GAwBd,OARa,eACb,SAAC,GACC,EAAQ,GACR,EAAI,QAAU,IAGhB,CAAC,KA8BU,GA1BmD,SAAC,G,MAC3D,EAAe,cACf,EAAe,cACf,EAAS,GAAY,EAAM,QAC3B,EAAO,YAAQ,EAAM,QACrB,EAAU,cACd,OAAI,GAAgB,GAAkB,EAAQ,oBAO9C,uBACM,IAAC,EACD,UAAO,IAAW,sBAAoB,GACxC,qCAAsC,EAAK,eAC3C,EAAC,8BAA8B,EAAK,eAAkB,EAAK,cAC3D,6BAA2B,EAAM,OACjC,KAED,EAAM,UAbP,uBAAK,UAAW,gCAAiC,EAAM,WClC9C,GAfiC,SAAC,G,IAAE,EAAQ,WAAE,EAAM,SAC3DE,EAAe,cACfC,EAAe,cAEf,EAAM,GAAY,GACtB,OAAI,GAAgB,EAIpB,uBAAK,IAAK,EAAK,UAAU,qBACtB,GAJI,uBAAK,UAAU,+BAA+B,I,4RCAnD,GAAuB,SAAC,G,IAAE,EAAK,QACjC,OAAF,QAAyB,IAAjB,EAAM,QAAgB,QAAQ,EAAM,GAAG,UA4BlC,WA1B2B,SAAC,G,MAAE,EAAM,SAC3C,KAAmB,cAAY,GAA9B,EAAG,KAAI,EAAK,WACb,EAAO,YAAO,GACd,EAAe,cAErB,OACE,gBAAC,GAAS,CAAC,OAAQ,GACjB,uBACE,IAAK,EACL,UAAW,IAAW,WAAS,GAC7B,2BAA4B,QAAQ,EAAK,gBACzC,EAAC,wBAAuB,EAAK,eAAiB,KAAO,QACnD,EAAK,eAEP,mCAAiC,GAAqB,GACtD,IACF,QAAS,GAER,EAAK,MAAM,KAAI,SAAC,GAAM,OACrB,gBAAC,GAAI,CAAC,OAAQ,EAAE,GAAI,SAAU,EAAO,IAAK,EADrB,aC6ChB,GA5D8B,SAAC,G,IAAE,EAAM,SAC9C,EAAO,YAAQ,GACf,EAAO,cACP,EAAa,cACb,EAAgB,cAChB,EAAa,cAEb,EAAmB,YAAoB,EAAK,IAC5C,EAAW,YAAY,GAEvB,EAAQ,YAAa,EAAK,IAC1B,EAAU,YAAa,EAAK,IAE5B,EAAM,WACJ,EAAc,EAAK,OAAO,OAAjB,UACX,EAAS,YAAc,EAAK,IAC5B,EAAc,eAClB,SAAC,GASC,OAPG,GACA,EAAE,OAA0B,QAAQ,qBAEnC,EAAI,SAEN,GAAM,EAAO,gBAER,IAET,CAAC,IAGH,OACE,uBACE,YAAc,OAA8B,EAAd,EAC9B,UAAW,EACX,UAAU,iBACV,IAAK,GAEL,gBAAC,EAAS,CACR,SAAU,EACV,KAAM,EACN,OAAQ,EACR,KAAM,EACN,MAAO,EACP,aAAc,EAAK,OAAO,OAC1B,QAAS,GAAc,EACvB,UAAW,EACX,SAAU,EACV,WAAY,EACZ,cAAe,EACf,OAAQ,GAEP,EAAK,KAAK,KAAI,SAAC,GAAM,OACpB,gBAAC,GAAG,CAAC,OAAQ,EAAE,GAAI,IAAK,EADJ,WCjDf,WAbV,SAAC,G,IAAE,EAAM,SAEJ,EADK,YAAQ,GACJ,KAAT,OAAI,MAAG,GAAE,EAEjB,OACE,uBAAK,UAAU,gCACZ,EAAK,KAAI,SAAC,GAAM,OACf,gBAAC,GAAG,CAAC,OAAQ,EAAE,GAAI,IAAK,EADT,Y,iNCsCR,WAxC6B,SAAC,GAC3C,IAAM,EAAO,YAAQ,EAAM,QAEzB,EAGE,EAHO,KAAT,OAAI,MAAG,GAAE,EACT,EAEE,EAFsE,OAA9D,cAA4D,GAAE,GAAP,OAA7C,cAA2C,GAAE,GAAP,UAA3B,OAAe,WAAG,EAAS,EAC1D,EACE,EADwE,QAA/D,cAA6D,GAAE,GAAP,OAA9C,cAA4C,GAAE,GAAP,UAA5B,OAAgB,WAAG,EAAS,EAG9D,OAAI,EAAK,QAAU,EAEf,gBAAC,GAAS,MAAK,GACb,gBAAC,EAAS,MAAK,GACb,gBAAC,GAAM,MAAK,MAIT,EAAK,OAEZ,gBAAC,GAAS,MAAK,GACb,gBAAC,GAAI,MAAK,KAGL,EAEP,gBAAC,GAAS,MAAK,EAAK,CAAE,QAAQ,IAC5B,gBAAC,EAAS,MAAK,EAAK,CAAE,QAAQ,IAC5B,gBAAC,IAAO,MAAK,MAOnB,gBAAC,EAAS,CACR,KAAM,EACN,MAAO,IAAI,MAAM,+C,iCCrCV,GAAc,SACzB,EAKA,G,IAJE,EAAS,YACT,EAAK,QACL,EAAM,SAIJ,EAAO,KAAK,MAAM,EAAO,MAAQ,GAWrC,MAVe,UAAX,IACF,EAAO,EAAQ,GAGb,EAAO,EACT,EAAO,EACE,EAAO,IAChB,EAAO,GAGF,G,kWC8EM,GArFf,YAGI,SAAF,EAAY,GAAR,IAAJ,EACE,YAAM,IAAM,KAeV,EAAJ,aAAe,SAAC,GACd,IAAI,MAAM,EAAK,OAAf,CAGM,MAAU,GACd,CACE,MAAO,EAAK,MAAM,MAClB,UAAW,EAAK,MAAM,UACtB,OAAQ,EAAK,MAAM,KAAK,QAE1B,GAEI,EAAD,MAAM,SAAS,KAGlB,EAAJ,SAAW,SAAC,EAAc,G,IAAE,EAAI,OAC1B,MAAM,EAAK,SAGf,EAAK,SAAS,CAAE,MAAO,EAAK,QAC5B,EAAK,sBAAsB,KAGzB,EAAJ,aAAe,SAAC,EAAc,G,IAAE,EAAI,OAClC,IAAI,MAAM,EAAK,OAAf,CAGA,EAAK,aAAa,GAClB,IAAM,EAAU,GACd,CACE,MAAO,EAAK,MAAM,MACV,UAAG,EAAK,MAAM,UACd,SAAK,MAAM,KAAK,QAE1B,GAEF,EAAK,SAAS,CAAE,MAAO,EAAU,EAAK,MAAM,cAjDxC,IAAE,ED1BsB,SAAC,G,IAC/B,EAAQ,WACR,EAAK,QAIO,YAAK,MAAM,GAAY,GAAS,KCoB/B,CAAiB,CACpB,SAAI,EAAM,SACV,MAAC,EAAM,KAAK,O,OAGhB,EAAC,sBAAwB,KAAS,EAAK,aAAc,KACrD,EAAC,MAAQ,CACX,UAAW,EACL,MAAC,EAAM,KAAK,KAAO,EACnB,MAAC,EAAM,MAAQ,GAAK,I,EAoEhC,OAnFwB,QAyDtB,8B,MACQ,EAGF,KAAK,MAFP,SAAQ,EAAM,SAAE,EAAM,SACtB,EAAQ,WAGV,OACE,gBAAC,aAAe,CACd,UAAW,IAAW,iBAAkB,sBAAoB,KAC1D,EAAC,8BAA6B,GAAU,KAAO,EAC/C,IACF,SAAU,KAAK,SACf,aAAc,KAAK,aACnB,eAAgB,EAAS,KAAO,CAAC,KAAK,MAAM,UAAW,KACvD,eACE,EAAS,KAAO,CAAC,EAAO,MAAQ,KAAK,MAAM,UAAW,KAExD,cAAe,CAAE,KAAM,OAAQ,aAAc,SAAS,MACtD,MAAO,KAAK,MAAM,MAClB,OAAQ,GAGR,2BAAM,KAId,EAnFA,CAAwB,iB,kWCFlB,GAAY,SAAC,G,IACjB,EAAa,gBACb,EAAU,aACV,EAAI,OAMJ,OAAI,GAAiB,EACZ,aAAY,GAAiB,EAAa,KAAO,MAAI,KAC1D,GAAQ,IAAE,kBAIP,gBAAe,GAAQ,KAO1B,GAAa,YAAG,2D,OAMpB,QAAQ,CACN,MAAO,M,EAYT,OAnBkC,QAShC,EAAF,qCAAkB,GAChB,KAAK,SAAS,CAAE,MAAK,KAGrB,EAAF,4BACE,OAAI,KAAK,MAAM,MACN,gBAAC,EAAS,CAAC,KAAM,KAAK,MAAM,KAAM,MAAO,KAAK,MAAM,QAEtD,KAAK,MAAM,UAEtB,EAnBmB,CAAiB,aA2FrB,WAlEe,SAAC,G,QA7BZ,EA6Bc,EAAM,SAAE,EAAQ,WACzC,EAAO,YAAQ,GACf,EAAU,YAAa,GAG3B,EAOE,EAPI,OAEN,EAKE,EALgB,mBAClB,EAIE,EAJK,QACP,EAGE,EAHS,YACX,EAEE,EAFE,KACJ,EACE,EADO,UAEL,EAAO,cACP,EAAgB,cAChB,EAAe,cACf,EAAa,cACb,EAAe,cACb,EAA0B,cAAL,sBAEvB,EAAa,YAAc,GAE3B,EAAkC,QAArB,EAAc,OAAX,QAAW,IAAX,OAAW,EAAX,EAAc,UAAI,QAAK,EAE7C,OAAI,GAAiB,EACZ,KAIP,uBACE,UAAW,IACT,WACA,GAAU,CACR,WAAU,EACV,cAAa,EACb,KAAI,KACJ,GAEA,gCAAiC,GACjC,EAAC,oBAAmB,GAAU,KAAO,EACrC,sBAAoB,EACpB,uBAAqB,EACrB,+BAA6B,EAC7B,8BAA4B,IAAiB,GAAgB,EAEhE,IACD,SA3Ea,EA2EM,EA3EmB,SAC1C,GACG,OAAC,EAAc,EAAE,kBAAjB,QA2EC,gBAAC,GAAa,CAAC,KAAM,GAClB,IAAc,GAAgB,IAA0B,EACvD,gBAAC,GAAS,CACR,SAAU,EACV,KAAM,EACN,MAAO,GACP,SAAU,GAEV,gBAAC,GAAK,CAAC,OAAQ,KAGjB,gBAAC,GAAK,CAAC,OAAQ,S,4RC5FzB,IAuEe,GAvEgB,SAAC,G,MAAE,EAAa,gBACvC,EAAO,cACP,EAAM,mBACN,KAAuB,cAAY,GAAlC,EAAO,KAAI,EAAK,WACjB,EAAmB,QAAd,EAAO,OAAJ,QAAI,IAAJ,OAAI,EAAJ,EAAM,aAAK,QAAI,GAEvB,EAA4B,WAIhC,OAAF,YAAE,EAAQ,WACR,IAAM,EAAW,KAAS,WACxB,GAAI,EAAI,QAAS,CACf,IAAM,EAAkC,MAAM,UAAU,KAAK,KAC3D,EAAI,QAAQ,uBAAuB,aACnC,SAAC,GAAyB,OAjCpC,SAA6B,GAC3B,IAAM,EAAO,EAAG,wBAEhB,OACE,EAAK,KAAO,GACZ,EAAK,MAAQ,GACb,EAAK,SACF,OAAO,aACN,SAAS,gBAAgB,eAC7B,EAAK,QACF,OAAO,YACN,SAAS,gBAAgB,aAsBG,OAGhBC,EAAgB,QADxB,EACkC,CACtBC,GAAR,EACQC,UAAD,EAAgB,wBAAwB,KAGjB,QAGvC,KAIC,OAFAC,OAAG,iBAAiB,SAAU,GAE3B,WACL,OAAO,oBAAoB,SAAU,OAGvC,IAAI,EAAW,cACX,EAAiB,uBACrB,SAAC,GACC,EAAS,YAAmB,EAAY,OAAJ,QAAI,IAAJ,OAAI,EAAJ,EAAM,OAE5C,CAAC,EAAc,OAAJ,QAAI,IAAJ,OAAI,EAAJ,EAAM,KAGbC,EAA2B,GAAyB,IAAjB,EAAM,OAe/C,OAdE,OAAF,YAAE,EAAQ,WACJ,GACI,EAAS,KAEhB,CAAC,IAEF,OAAF,YAAE,EAAQ,WACR,GAAIJ,EAA0BK,QAAS,CAC/B,MAAoB,EAA0B,QAA5C,EAAE,KAAE,EAAS,YACrB,YAAW,WACT,YAAyB,EAAI,EAAW,UACvC,MAEJ,CAAC,EAA0B,UACzB,EAIH,uBAAK,IAAK,GACR,uBAAK,IAAK,EAAK,UAAU,gBACtB,EAAM,KAAI,SAAC,GAAS,OACnB,gBAAC,GAAI,CAAC,OAAQ,EAAK,GAAI,SAAU,EAAO,IAAK,EAD1B,UALlB,M,8UCFI,OAAM,MAlEqB,SAAC,GACvC,IAAF,EAAE,KACF,EAAQ,WACR,EAAY,eACZ,EAAI,OAED,EAAmB,KANmB,yCAQnC,EAAS,cAGb,OAAF,YAAE,EAAQ,WACJ,EAAG,QAAQ,KACd,CAAC,EAAM,IAER,IAAI,EAAwB,mBAsC9B,OArCE,OAAF,YAAE,EAAQ,WACJ,MAAU,EA8BR,EAAc,EAAO,MAAM,WA7BX,WAEd,MAAU,EAAO,MAAM,WAAW,UAAU,SAAS,KACvD,IAAY,GAAW,IAAY,IACrC,EAAU,EACE,OAAZ,QAAY,IAAZ,KAAe,IAIX,MAAqB,mBAAS,EAAO,MAAM,WAAY,CAC3D,GAAI,IAGA,GAAD,EAAC,CAIN,IAAM,EAAa,EAAO,QAAQ,UAAU,GACpB,YACtB,EAAsB,QACtB,KAMF,EAAsB,QAAU,EAChC,EAAS,QAGX,OAAO,WACL,OAED,CAAC,EAAQ,EAAI,IAGd,kBAAC,IAAe,SAAQ,CAAC,MAAO,GAC9B,kBAAC,IAAgB,SAAQ,CAAC,MAAO,GAC/B,kBAAC,EAAe,KACd,kBAAC,EAAgB,KACf,kBAAC,GAAK,CAAC,GAAI,EAAI,cAAe,EAAO,uB,ojBCuBlC,UArEuC,SAAC,GACnD,IAAF,EAAO,UACP,EAAa,gBACb,EAAK,QACL,EAAQ,WACR,EAAU,aACV,EAAkB,qBAClB,EAAgB,mBAChB,EAAI,OACJ,EAAS,YACT,EAAY,eACZ,EAAiB,oBACd,EAAI,KAZ8C,2JAc/C,EAAW,GAAS,cAEpB,EAAe,mBAEf,EAAY,iBAChB,IAAI,IAAO,CAAE,cAAa,EAAE,QAAO,EAAE,UAAS,EAAE,KAAI,KAGhD,EAAmB,uBACvB,SAAC,GACC,EAAa,QAAU,EAEvB,EAAS,KAEX,CAAC,IAGG,EAAQ,YAAW,EAAsB,OAAZ,QAAY,IAAZ,OAAY,EAAZ,EAAc,SAEjD,qBAAU,WACH,IACH,EAAa,QAAU,EACvB,EAAU,QAAQ,OAAO,MAE1B,CAAC,IACJ,IAAM,EAAS,EAAU,QAEzB,OACE,kBAAC,EAAQ,CACP,OAAQ,EACR,WAAY,EACZ,iBAAkB,EAClB,oBAAqB,GAErB,kBAAC,KAAa,MACX,SAAC,GAAe,OACf,oCACE,kBAAC,GAAQ,IACP,KAAM,EACN,aAAc,EACd,GAAY,OAAR,QAAQ,IAAR,OAAQ,EAAR,EAAU,GACd,SAAU,GACN,IAEN,kBAAC,KAAQ,CACP,WAAY,EACZ,kBAXW,W,iCCnFzB,mHAcM,GAHQ,aAAS,WAAM,oFACR,aAAS,WAAM,oFACV,aAAS,WAAM,oFACnB,aAAS,WAAM,qFAC/B,EAAW,aAAS,WAAM,oFAG1B,GADgB,aAAS,WAAM,+DACjB,aAAS,WAAM,uEAC7B,EAAc,aAAS,WAAM,qFAEpB","file":"static/js/30.418688b7.chunk.js","sourcesContent":["var __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport React, { useState } from 'react';\nvar StickyWrapper = function (_a) {\n    var children = _a.children;\n    var ref = React.createRef();\n    var stickyElRef = React.createRef();\n    var _b = __read(useState(false), 2), shouldStickToTop = _b[0], setShouldStickToTop = _b[1];\n    var _c = __read(useState(true), 2), shouldStickToBottom = _c[0], setShouldStickToBottom = _c[1];\n    var _d = __read(useState(0), 2), rightOffset = _d[0], setRightOffset = _d[1];\n    React.useEffect(function () {\n        var calc = function () {\n            if (ref.current) {\n                var _a = ref.current.getBoundingClientRect(), top_1 = _a.top, left = _a.left;\n                var bottom = top_1 + ref.current.clientHeight;\n                // document.documentElement.clientWidth is without scrollbars, so better for us\n                var right = document.documentElement.clientWidth - left - ref.current.clientWidth;\n                var uiHeight = stickyElRef.current\n                    ? stickyElRef.current.clientHeight\n                    : 400;\n                setRightOffset(right);\n                setShouldStickToTop(top_1 > window.innerHeight - uiHeight);\n                setShouldStickToBottom(bottom < window.innerHeight);\n            }\n        };\n        document.addEventListener('scroll', calc);\n        window.addEventListener('resize', calc);\n        var observer = null;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if (global.IntersectionObserver) {\n            observer = new IntersectionObserver(calc);\n            if (ref.current) {\n                observer.observe(ref.current);\n            }\n        }\n        // do it once\n        calc();\n        return function () {\n            document.removeEventListener('scroll', calc);\n            window.removeEventListener('resize', calc);\n            observer === null || observer === void 0 ? void 0 : observer.disconnect();\n        };\n    }, [ref, stickyElRef]);\n    return (React.createElement(\"div\", { style: { position: 'relative' }, ref: ref }, children({\n        rightOffset: rightOffset,\n        stickyElRef: stickyElRef,\n        shouldStickToTop: shouldStickToTop,\n        shouldStickToBottom: shouldStickToBottom,\n    })));\n};\nexport default StickyWrapper;\n//# sourceMappingURL=StickyWrapper.js.map","import React, { useEffect } from 'react';\nimport { DISPLAY_MODE_EDIT } from '../actions/display';\nimport { useBlurAllCells, useIsInsertMode, useSetMode } from './hooks';\n// this might break in future, but its better than nothing\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction findReactElement(node) {\n    for (var key in node) {\n        if (key.startsWith('__reactInternalInstance$')) {\n            return node[key];\n        }\n    }\n    return null;\n}\n// we go up the reac-tree. This works even through portals, which would not be possible with traversing the dom tree!\nvar isInSameTree = function (parent, child) {\n    if (!parent) {\n        return false;\n    }\n    var element = findReactElement(child);\n    while (element) {\n        if (element.stateNode === parent) {\n            return true;\n        }\n        element = element.return;\n    }\n    return false;\n};\nvar useBlurAll = function (_a) {\n    var _b = _a.defaultMode, defaultMode = _b === void 0 ? DISPLAY_MODE_EDIT : _b, disabled = _a.disabled;\n    var ref = React.useRef();\n    var blurAllCells = useBlurAllCells();\n    var setMode = useSetMode();\n    var isInsertMode = useIsInsertMode();\n    useEffect(function () {\n        if (disabled) {\n            return;\n        }\n        if (!ref.current) {\n            return;\n        }\n        if (!document && !document.body) {\n            return;\n        }\n        var onMouseDown = function (e) {\n            if (!isInSameTree(ref.current, e.target)) {\n                blurAllCells();\n                // set us in default mode if current mode is \"insert\"\n                if (isInsertMode) {\n                    setMode(defaultMode);\n                }\n            }\n        };\n        document.body.addEventListener('mousedown', onMouseDown);\n        return function () {\n            document.body.removeEventListener('mousedown', onMouseDown);\n        };\n    }, [ref.current, disabled, isInsertMode, setMode, blurAllCells]);\n    return ref;\n};\nvar BlurGate = function (_a) {\n    var defaultMode = _a.defaultMode, disabled = _a.disabled, children = _a.children;\n    var ref = useBlurAll({ defaultMode: defaultMode, disabled: disabled });\n    return React.createElement(\"div\", { ref: ref }, children);\n};\nexport default BlurGate;\n//# sourceMappingURL=BlurGate.js.map","import * as React from 'react';\nimport { DndProvider } from 'react-dnd';\nimport { HTML5Backend } from 'react-dnd-html5-backend';\nimport BlurGate from '../components/BlurGate';\nimport { EditorContext } from '../Editor';\nimport { ReduxProvider } from '../reduxConnect';\nvar Provider = function (_a) {\n    var editor = _a.editor, _b = _a.children, children = _b === void 0 ? [] : _b, _c = _a.dndBackend, dndBackend = _c === void 0 ? HTML5Backend : _c, _d = _a.blurGateDisabled, blurGateDisabled = _d === void 0 ? false : _d, blurGateDefaultMode = _a.blurGateDefaultMode;\n    return (React.createElement(DndProvider, { backend: dndBackend },\n        React.createElement(ReduxProvider, { store: editor.store },\n            React.createElement(EditorContext.Provider, { value: editor },\n                React.createElement(BlurGate, { disabled: blurGateDisabled, defaultMode: blurGateDefaultMode }, children)))));\n};\nexport default Provider;\n//# sourceMappingURL=index.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread = (this && this.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));\n    return ar;\n};\n/* eslint-disable @typescript-eslint/ban-types */\nimport isHotkey from 'is-hotkey';\nimport React, { useCallback, useEffect, useMemo } from 'react';\nimport { blurAllCells } from '../../actions/cell';\nimport { isRow } from '../../types/editable';\nimport { useEditableNode, useEditor, useFocusCellById, useIsEditMode, useRedo, useRemoveCellById, useUndo, useFocusedNodeId, } from '../hooks';\nvar nextLeaf = function (order, current) {\n    if (order === void 0) { order = []; }\n    var last;\n    return order.find(function (c) {\n        if (last === current) {\n            return c.isLeaf;\n        }\n        last = c.id;\n        return false;\n    });\n};\nvar previousLeaf = function (order, current) {\n    return nextLeaf(__spread(order).reverse(), current);\n};\nvar delegateToPlugin = function (event, n, handlerName) { return __awaiter(void 0, void 0, void 0, function () {\n    var plugin;\n    var _a, _b, _c;\n    return __generator(this, function (_d) {\n        switch (_d.label) {\n            case 0:\n                if (isRow(n)) {\n                    return [2 /*return*/];\n                }\n                plugin = (_b = (_a = n === null || n === void 0 ? void 0 : n.layout) === null || _a === void 0 ? void 0 : _a.plugin) !== null && _b !== void 0 ? _b : (_c = n === null || n === void 0 ? void 0 : n.content) === null || _c === void 0 ? void 0 : _c.plugin;\n                if (!(plugin === null || plugin === void 0 ? void 0 : plugin[handlerName])) return [3 /*break*/, 2];\n                return [4 /*yield*/, plugin[handlerName](event, n)];\n            case 1:\n                _d.sent();\n                _d.label = 2;\n            case 2: return [2 /*return*/];\n        }\n    });\n}); };\nvar Decorator = function (_a) {\n    var children = _a.children;\n    var editor = useEditor();\n    var editableNode = useEditableNode();\n    var undo = useUndo();\n    var redo = useRedo();\n    var focusedNodeId = useFocusedNodeId();\n    var focusCell = useFocusCellById();\n    var removeCell = useRemoveCellById();\n    var delegateToFoundPlugin = useCallback(function (event, nodeId, handlerName, defaultHandler) { return __awaiter(void 0, void 0, void 0, function () {\n        var cellNode, e_1;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    cellNode = editor.getNode(editableNode === null || editableNode === void 0 ? void 0 : editableNode.id, nodeId);\n                    _a.label = 1;\n                case 1:\n                    _a.trys.push([1, 5, , 6]);\n                    if (!cellNode) return [3 /*break*/, 3];\n                    return [4 /*yield*/, delegateToPlugin(event, cellNode, handlerName)];\n                case 2:\n                    _a.sent();\n                    _a.label = 3;\n                case 3: \n                // if the plugin handler resolve or there is no, they do not handle it, so do the default\n                return [4 /*yield*/, defaultHandler(event, cellNode)];\n                case 4:\n                    // if the plugin handler resolve or there is no, they do not handle it, so do the default\n                    _a.sent();\n                    return [3 /*break*/, 6];\n                case 5:\n                    e_1 = _a.sent();\n                    if (e_1) {\n                        // tslint:disable-next-line:no-console\n                        console.error(e_1);\n                    }\n                    return [3 /*break*/, 6];\n                case 6: return [2 /*return*/];\n            }\n        });\n    }); }, [editableNode === null || editableNode === void 0 ? void 0 : editableNode.id, editor]);\n    var handlers = useMemo(function () { return [\n        {\n            hotkeys: ['ctrl+z', 'command+z'],\n            handler: function () {\n                undo();\n            },\n        },\n        {\n            hotkeys: ['ctrl+shift+z', 'ctrl+y', 'command+shift+z', 'command+y'],\n            handler: function () {\n                redo();\n            },\n        },\n        {\n            hotkeys: ['alt+del', 'alt+backspace'],\n            handler: function (event) {\n                delegateToFoundPlugin(event, focusedNodeId, 'handleRemoveHotKey', function () {\n                    removeCell(focusedNodeId);\n                });\n            },\n        },\n        {\n            hotkeys: ['alt+down', 'alt+right'],\n            handler: function (event) {\n                delegateToFoundPlugin(event, focusedNodeId, 'handleFocusNextHotKey', function () {\n                    var found = nextLeaf(editableNode.cellOrder, focusedNodeId);\n                    if (found) {\n                        blurAllCells();\n                        focusCell(found.id, true);\n                    }\n                });\n            },\n        },\n        {\n            hotkeys: ['alt+up', 'alt+left'],\n            handler: function (event) {\n                delegateToFoundPlugin(event, focusedNodeId, 'handleFocusPreviousHotKey', function () {\n                    var found = previousLeaf(editableNode.cellOrder, focusedNodeId);\n                    if (found) {\n                        blurAllCells();\n                        focusCell(found.id, true);\n                    }\n                });\n            },\n        },\n    ]; }, [editableNode, focusedNodeId, blurAllCells, focusCell, removeCell]);\n    var isEditMode = useIsEditMode();\n    useEffect(function () {\n        // in editmode we only allow hotkeys if a cell is focused.\n        // this is because if we have multiple editors on the same page, we don't want to interfer with others\n        // and also to make it more explicit\n        // The BlurGate currently guarantees that only one editor ever has a focused cell, so we already know on which one we can apply hotkeys\n        // If the editor is in another mode, all hot keys are allowed (which is useful for undo/redo, e.g. when resizing)\n        // because the BlurGate also guarantees that only one editor will be in another mode then editMode\n        // This is not totally clean, but it works very well.\n        if (isEditMode && !focus) {\n            return;\n        }\n        var keyHandler = function (event) {\n            var matchingHandler = handlers.find(function (handler) {\n                return handler.hotkeys.some(function (hotkey) { return isHotkey(hotkey, event); });\n            });\n            matchingHandler === null || matchingHandler === void 0 ? void 0 : matchingHandler.handler(event);\n        };\n        document.addEventListener('keydown', keyHandler);\n        return function () {\n            document.removeEventListener('keydown', keyHandler);\n        };\n    }, [handlers, focus, isEditMode]);\n    return React.createElement(React.Fragment, null, children);\n};\nexport default Decorator;\n//# sourceMappingURL=Decorator.js.map","var __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport React from 'react';\nimport { useDrop } from 'react-dnd';\nimport { useInsertCellAtTheEnd } from '../hooks';\nvar FallbackDropArea = function (_a) {\n    var children = _a.children;\n    var insertAtTheEnd = useInsertCellAtTheEnd();\n    var _b = __read(useDrop({\n        accept: 'cell',\n        drop: function (item, monitor) {\n            // fallback drop\n            if (!monitor.didDrop()) {\n                insertAtTheEnd(item.cell);\n            }\n        },\n    }), 2), dropRef = _b[1];\n    return React.createElement(\"div\", { ref: dropRef }, children);\n};\nexport default FallbackDropArea;\n//# sourceMappingURL=FallbackDropArea.js.map","import * as React from 'react';\nimport { useIsEditMode, useRemoveCell } from '../../hooks';\nvar ErrorCell = function (_a) {\n    var node = _a.node, error = _a.error;\n    var isEditMode = useIsEditMode();\n    var removeCell = useRemoveCell(node.id);\n    return (React.createElement(\"div\", { className: \"ory-cell-error\" },\n        React.createElement(\"strong\", null, \"An error occurred!\"),\n        React.createElement(\"small\", null,\n            React.createElement(\"dl\", null,\n                React.createElement(\"dt\", null, \"Cause:\"),\n                React.createElement(\"dd\", null, error.message),\n                React.createElement(\"dt\", null, \"Cell:\"),\n                React.createElement(\"dd\", null, node.id))),\n        isEditMode ? React.createElement(\"button\", { onClick: function () { return removeCell(); } }, \"Remove\") : null));\n};\nexport default ErrorCell;\n//# sourceMappingURL=index.js.map","var __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport classNames from 'classnames';\nimport * as React from 'react';\nimport { DragPreviewImage, useDrag } from 'react-dnd';\nimport { useCell, useHoverActions, useIsFocused, useIsLayoutMode, useOptions, } from '../../hooks';\nvar icon = \n// tslint:disable-next-line:max-line-length\n'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAhCAYAAACbffiEAAAA6UlEQVRYhe2ZQQ6CMBBFX0njHg7ESXTp1p3uvIBewc3Em3AfdelSFwRDCAm01JRO+pa0lP8zzc9kMCKyAa7AFqhIixdwB44WuACHuHq8KWm1vwtgF1lMCPaWkevUNE3Qr9R17XTu1P5uvUdV+IpbG2qMGBH5xBYRAjUVUWPEjj10SS3XRFry3kha/VBTETVGcmqtDTVGFqdWn7k9ku96f88QNRVRYySn1tpQY8QptXz7qinmnpt7rZTIqbU21BgJ2mv1+XfCDVFTETVGjIg8SG8KP+RZ0I7lU+dmgRNgaKfyZVw9znT/R85fOHJJE77U6UcAAAAASUVORK5CYII=';\nvar DefaultSmallHandle = function () { return (React.createElement(\"div\", { className: \"ory-cell-draggable-overlay-handle\" },\n    React.createElement(\"div\", { className: \"ory-cell-draggable-overlay-handle-icon\" }))); };\nvar Draggable = function (_a) {\n    var _b;\n    var _c;\n    var isLeaf = _a.isLeaf, children = _a.children, nodeId = _a.nodeId;\n    var preventBlurWhenClickingOnHandle = React.useCallback(function (e) {\n        e.stopPropagation();\n    }, []);\n    var cell = useCell(nodeId);\n    var actions = useHoverActions();\n    var _d = __read(useDrag({\n        item: {\n            type: 'cell',\n            cell: cell,\n        },\n        collect: function (monitor) { return ({\n            isDragging: monitor.isDragging(),\n        }); },\n        begin: function (monitor) {\n            actions.dragCell(cell.id);\n        },\n        end: function (item, monitor) {\n            if (monitor.didDrop()) {\n                // If the item drop occurred deeper down the tree, don't do anything\n                return;\n            }\n            // If drag ended but drop did not occur, cancel dragging\n            actions.cancelCellDrag();\n        },\n    }), 3), isDragging = _d[0].isDragging, dragRef = _d[1], preview = _d[2];\n    var focused = useIsFocused(nodeId);\n    var isLayoutMode = useIsLayoutMode();\n    var options = useOptions();\n    if (!isLayoutMode && !options.allowMoveInEditMode) {\n        return (React.createElement(\"div\", { className: \"ory-cell-draggable-container\" },\n            React.createElement(\"div\", { className: \"ory-cell-draggable-overlay-placeholder\" }),\n            children));\n    }\n    if (options.allowMoveInEditMode && !isLayoutMode) {\n        return (React.createElement(React.Fragment, null,\n            React.createElement(DragPreviewImage, { connect: preview, src: icon }),\n            React.createElement(\"div\", { className: classNames({\n                    'ory-cell-draggable-in-edit': options.allowMoveInEditMode,\n                    'ory-cell-draggable': isLayoutMode && !options.allowMoveInEditMode,\n                    'ory-cell-draggable-is-dragging': isDragging,\n                }), onMouseDown: preventBlurWhenClickingOnHandle },\n                focused ? (React.createElement(\"div\", { ref: dragRef }, (_c = options.editModeResizeHandle) !== null && _c !== void 0 ? _c : React.createElement(DefaultSmallHandle, null))) : null,\n                React.createElement(\"div\", null, children))));\n    }\n    return (React.createElement(React.Fragment, null,\n        React.createElement(DragPreviewImage, { connect: preview, src: icon }),\n        React.createElement(\"div\", { ref: dragRef, className: classNames({\n                'ory-cell-draggable': isLayoutMode,\n                'ory-cell-draggable-is-dragging': isDragging,\n            }) },\n            React.createElement(\"div\", { className: classNames((_b = {\n                        'ory-cell-draggable-overlay': isLayoutMode\n                    },\n                    _b[\"ory-cell-draggable-inline-\" + cell.inline] = cell.inline,\n                    _b['ory-cell-draggable-leaf'] = isLeaf,\n                    _b)) },\n                React.createElement(\"div\", { className: \"ory-cell-draggable-overlay-description\" },\n                    React.createElement(\"span\", null, name))),\n            React.createElement(\"div\", null, children))));\n};\nexport default Draggable;\n//# sourceMappingURL=index.js.map","import { isProduction } from '../../const';\nexport var delay = isProduction ? 40 : 60;\n//# sourceMappingURL=index.js.map","// tslint:disable:no-console\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread = (this && this.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));\n    return ar;\n};\nvar trace = function () {\n    var e = new Error('dummy');\n    return e.stack\n        .replace(/^[^(]+?[\\n$]/gm, '')\n        .replace(/^\\s+at\\s+/gm, '')\n        .replace(/^Object.<anonymous>\\s*\\(/gm, '{anonymous}()@')\n        .split('\\n');\n};\nvar Logger = /** @class */ (function () {\n    function Logger() {\n    }\n    /**\n     * Logs a warning. Warnings are things that are exceptional, but easily to recover from.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    Logger.prototype.warn = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        console.warn.apply(console, __spread(['Warning:'], args));\n    };\n    /**\n     * Logs a debug message. Debug messages are things that help developers debugging things.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    Logger.prototype.debug = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        console.log.apply(console, __spread(['Debug:'], args));\n    };\n    /**\n     * Logs an info. Infos are things that might be interesting for someone who needs to take a closer look.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    Logger.prototype.info = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        console.log.apply(console, __spread(['Info:'], args));\n    };\n    /**\n     * Logs an error. Error are things that are exceptional, but can be recovered from.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    Logger.prototype.error = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        console.error.apply(console, __spread(['Error:'], args));\n        console.error('Trace:', trace());\n    };\n    /**\n     * Logs a fatal error. Fatal errors are things that are exceptional and can not be recovered from.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    Logger.prototype.fatal = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        console.error.apply(console, __spread(['Fatal:'], args));\n        console.error('Trace:', trace());\n        throw new Error(args.join(' '));\n    };\n    /**\n     * Logs a message.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    Logger.prototype.log = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        console.log.apply(console, __spread(['Fatal:'], args));\n        console.log('Trace:', trace());\n    };\n    return Logger;\n}());\nexport { Logger };\nvar instance = new Logger();\nexport default instance;\n//# sourceMappingURL=index.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar _a;\nimport { isRow } from '../../types/editable';\nimport deepEquals from '../../utils/deepEquals';\nimport logger from '../logger';\n/**\n * NO (None): No drop zone.\n *\n * Corners are counted clockwise, beginning top left\n * C1 (Corner top left): Position decided by top left corner function\n * C2 (Corner top right): Position decided by top right corner function\n * C3 (Corner bottom right): Position decided by bottom right corner function\n * C4 (Corner bottom left): Position decided by bottom left corner function\n *\n * Above:\n * AH (Above here): above, same level\n * AA (Above of self or some ancestor): Above, compute active level using classification functions, e.g. log, sin, mx + t\n *\n * Below:\n * BH (Below here)\n * BA (Below of self or some ancestor)\n *\n * Left of:\n * LH (Left of here)\n * LA (Left of self or some ancestor)\n *\n * Right of:\n * RH (Right of here)\n * RA (Right of self or some ancestor)\n *\n * Inside / inline\n * IL (Inline left)\n * IR (Inline right)\n */\nexport var classes = {\n    NO: 0,\n    C1: 10,\n    C2: 11,\n    C3: 12,\n    C4: 13,\n    AH: 200,\n    AA: 201,\n    BH: 210,\n    BA: 211,\n    LH: 220,\n    LA: 221,\n    RH: 230,\n    RA: 231,\n    IL: 300,\n    IR: 301,\n};\nvar c = classes;\n/**\n * A list of matrices that are used to define the callback function.\n *\n * @type {{6x6: *[], 10x10: *[], 10x10-no-inline: *[]}}\n */\nexport var defaultMatrices = {\n    '6x6': [\n        [c.C1, c.AA, c.AA, c.AA, c.AA, c.C2],\n        [c.LA, c.IL, c.AH, c.AH, c.IR, c.RA],\n        [c.LA, c.LH, c.NO, c.NO, c.RH, c.RA],\n        [c.LA, c.LH, c.NO, c.NO, c.RH, c.RA],\n        [c.LA, c.C4, c.BH, c.BH, c.C3, c.RA],\n        [c.C4, c.BA, c.BA, c.BA, c.BA, c.C3],\n    ],\n    '10x10': [\n        [c.C1, c.AA, c.AA, c.AA, c.AA, c.AA, c.AA, c.AA, c.AA, c.C2],\n        [c.LA, c.IL, c.IL, c.IL, c.AH, c.AH, c.IR, c.IR, c.IR, c.RA],\n        [c.LA, c.IL, c.IL, c.IL, c.AH, c.AH, c.IR, c.IR, c.IR, c.RA],\n        [c.LA, c.IL, c.IL, c.IL, c.AH, c.AH, c.IR, c.IR, c.IR, c.RA],\n        [c.LA, c.LH, c.LH, c.LH, c.C1, c.C2, c.RH, c.RH, c.RH, c.RA],\n        [c.LA, c.LH, c.LH, c.LH, c.C4, c.C3, c.RH, c.RH, c.RH, c.RA],\n        [c.LA, c.LH, c.LH, c.C4, c.BH, c.BH, c.C3, c.IR, c.RH, c.RA],\n        [c.LA, c.LH, c.C4, c.BH, c.BH, c.BH, c.BH, c.C3, c.RH, c.RA],\n        [c.LA, c.C4, c.BH, c.BH, c.BH, c.BH, c.BH, c.BH, c.C3, c.RA],\n        [c.C4, c.BA, c.BA, c.BA, c.BA, c.BA, c.BA, c.BA, c.BA, c.C3],\n    ],\n    '10x10-no-inline': [\n        [c.C1, c.AA, c.AA, c.AA, c.AA, c.AA, c.AA, c.AA, c.AA, c.C2],\n        [c.LA, c.C1, c.AH, c.AH, c.AH, c.AH, c.AH, c.AH, c.C2, c.RA],\n        [c.LA, c.LH, c.C1, c.AH, c.AH, c.AH, c.AH, c.C2, c.RH, c.RA],\n        [c.LA, c.LH, c.LH, c.C1, c.AH, c.AH, c.C2, c.RH, c.RH, c.RA],\n        [c.LA, c.LH, c.LH, c.LH, c.C1, c.C2, c.RH, c.RH, c.RH, c.RA],\n        [c.LA, c.LH, c.LH, c.LH, c.C4, c.C3, c.RH, c.RH, c.RH, c.RA],\n        [c.LA, c.LH, c.LH, c.C4, c.BH, c.BH, c.C3, c.RH, c.RH, c.RA],\n        [c.LA, c.LH, c.C4, c.BH, c.BH, c.BH, c.BH, c.C3, c.RH, c.RA],\n        [c.LA, c.C4, c.BH, c.BH, c.BH, c.BH, c.BH, c.BH, c.C3, c.RA],\n        [c.C4, c.BA, c.BA, c.BA, c.BA, c.BA, c.BA, c.BA, c.BA, c.C3],\n    ],\n};\n/**\n * Computes the average width and height for cells in a room.\n *\n * @param room\n * @param matrix\n * @returns {{x: number, y: number}}\n */\nexport var getRoomScale = function (_a) {\n    var room = _a.room, matrix = _a.matrix;\n    var rows = matrix.length;\n    var cells = matrix[0].length;\n    var scalingX = room.width / cells;\n    var scalingY = room.height / rows;\n    return {\n        x: scalingX,\n        y: scalingY,\n    };\n};\n/**\n * Returns the index of the hover cell.\n *\n * @param mouse\n * @param scale\n */\nexport var getMouseHoverCell = function (_a) {\n    var mouse = _a.mouse, scale = _a.scale;\n    return ({\n        cell: Math.floor(mouse.x / scale.x),\n        row: Math.floor(mouse.y / scale.y),\n    });\n};\n/**\n * Used for caching.\n */\nvar last = { '10x10': null, '10x10-no-inline': null };\nvar computeHover = function (drag, hover, actions, _a, m) {\n    var room = _a.room, mouse = _a.mouse, matrix = _a.matrix, callbacks = _a.callbacks;\n    var scale = getRoomScale({ room: room, matrix: matrix });\n    var hoverCell = getMouseHoverCell({ mouse: mouse, scale: scale });\n    var rows = matrix.length;\n    var cells = matrix[0].length;\n    if (hoverCell.row >= rows) {\n        hoverCell.row = rows - 1;\n    }\n    else if (hoverCell.row < 0) {\n        hoverCell.row = 0;\n    }\n    if (hoverCell.cell >= cells) {\n        hoverCell.cell = cells - 1;\n    }\n    else if (hoverCell.cell < 0) {\n        hoverCell.cell = 0;\n    }\n    var cell = matrix[hoverCell.row][hoverCell.cell];\n    if (!callbacks[cell]) {\n        logger.error('Matrix callback not found.', {\n            room: room,\n            mouse: mouse,\n            matrix: matrix,\n            scale: scale,\n            hoverCell: hoverCell,\n            rows: rows,\n            cells: cells,\n        });\n        return;\n    }\n    var all = {\n        item: drag.id,\n        hover: hover.id,\n        actions: actions,\n        ctx: {\n            room: room,\n            mouse: mouse,\n            position: hoverCell,\n            size: { rows: rows, cells: cells },\n            scale: scale,\n        },\n    };\n    if (deepEquals(all, last[m])) {\n        return;\n    }\n    last[m] = all;\n    return callbacks[cell](drag, hover, actions, {\n        room: room,\n        mouse: mouse,\n        position: hoverCell,\n        size: { rows: rows, cells: cells },\n        scale: scale,\n    });\n};\n/**\n * Return the mouse position relative to the cell.\n */\nexport var relativeMousePosition = function (_a) {\n    var mouse = _a.mouse, position = _a.position, scale = _a.scale;\n    return ({\n        x: Math.round(mouse.x - position.cell * scale.x),\n        y: Math.round(mouse.y - position.row * scale.y),\n    });\n};\n/**\n * Computes the drop level based on the mouse position and the cell width.\n */\nexport var computeLevel = function (_a) {\n    var size = _a.size, levels = _a.levels, position = _a.position;\n    if (size <= (levels + 1) * 2) {\n        return Math.round(position / (size / levels));\n    }\n    var spare = size - (levels + 1) * 2;\n    var steps = [0];\n    var current = spare;\n    for (var i = 0; i <= levels; i++) {\n        steps.push(steps[i] + current / 2);\n        current /= 2;\n        if (position >= steps[i] + i * 2 && position < steps[i + 1] + (i + 1) * 2) {\n            return i;\n        }\n    }\n    return levels;\n};\n/**\n * Computes the horizontal drop level based on the mouse position.\n *\n * @param mouse\n * @param position\n * @param hover\n * @param scale\n * @param level\n * @param inv returns the inverse drop level. Usually true for left and above drop level computation.\n * @returns number\n */\nexport var computeHorizontal = function (_a, inv) {\n    var mouse = _a.mouse, position = _a.position, hover = _a.hover, scale = _a.scale, level = _a.level;\n    if (inv === void 0) { inv = false; }\n    var x = relativeMousePosition({ mouse: mouse, position: position, scale: scale }).x;\n    var at = computeLevel({ size: scale.x, position: x, levels: level });\n    if (isRow(hover)) {\n        // Is row, always opt for lowest level\n        return level;\n    }\n    // If the hovered element is an inline element, level 0 would be directly besides it which doesn't work.\n    // Set it to 1 instead.\n    if (hover.inline && at === 0) {\n        at = 1;\n    }\n    return inv ? level - at : at;\n};\n/**\n * Computes the vertical drop level based on the mouse position.\n *\n * @returns number\n */\nvar computeVertical = function (_a, inv) {\n    var level = _a.level, mouse = _a.mouse, hover = _a.hover, position = _a.position, scale = _a.scale;\n    if (inv === void 0) { inv = false; }\n    var y = relativeMousePosition({ mouse: mouse, position: position, scale: scale }).y;\n    var at = computeLevel({ size: scale.y, position: y, levels: level });\n    if (isRow(hover)) {\n        // Is row, always opt for lowest level\n        return level;\n    }\n    // If the hovered element is an inline element, level 0 would be directly besides it which doesn't work.\n    // Set it to 1 instead.\n    if (hover.inline && at === 0) {\n        at = 1;\n    }\n    return inv ? level - at : at;\n};\nvar getDropLevel = function (hover) { return (!isRow(hover) && hover.inline ? 1 : 0); };\n/**\n * A list of callbacks.\n */\nexport var defaultCallbacks = (_a = {},\n    _a[c.NO] = function (item, hover, _a) {\n        var clear = _a.clear;\n        return clear();\n    },\n    /* corners */\n    _a[c.C1] = function (item, hover, _a, ctx) {\n        var leftOf = _a.leftOf, above = _a.above;\n        var mouse = relativeMousePosition(ctx);\n        var level = getDropLevel(hover);\n        if (mouse.x < mouse.y) {\n            return leftOf(item, hover, level);\n        }\n        above(item, hover, level);\n    },\n    _a[c.C2] = function (item, hover, _a, ctx) {\n        var rightOf = _a.rightOf, above = _a.above;\n        var mouse = relativeMousePosition(ctx);\n        var level = getDropLevel(hover);\n        if (mouse.x > mouse.y) {\n            return rightOf(item, hover, level);\n        }\n        above(item, hover, level);\n    },\n    _a[c.C3] = function (item, hover, _a, ctx) {\n        var rightOf = _a.rightOf, below = _a.below;\n        var mouse = relativeMousePosition(ctx);\n        var level = getDropLevel(hover);\n        if (mouse.x > mouse.y) {\n            return rightOf(item, hover, level);\n        }\n        below(item, hover, level);\n    },\n    _a[c.C4] = function (item, hover, _a, ctx) {\n        var leftOf = _a.leftOf, below = _a.below;\n        var mouse = relativeMousePosition(ctx);\n        var level = getDropLevel(hover);\n        if (mouse.x < mouse.y) {\n            return leftOf(item, hover, level);\n        }\n        below(item, hover, level);\n    },\n    /* heres */\n    _a[c.AH] = function (item, hover, _a) {\n        var above = _a.above;\n        var level = getDropLevel(hover);\n        above(item, hover, level);\n    },\n    _a[c.BH] = function (item, hover, _a) {\n        var below = _a.below;\n        var level = getDropLevel(hover);\n        below(item, hover, level);\n    },\n    _a[c.LH] = function (item, hover, _a) {\n        var leftOf = _a.leftOf;\n        var level = getDropLevel(hover);\n        leftOf(item, hover, level);\n    },\n    _a[c.RH] = function (item, hover, _a) {\n        var rightOf = _a.rightOf;\n        var level = getDropLevel(hover);\n        rightOf(item, hover, level);\n    },\n    /* ancestors */\n    _a[c.AA] = function (item, hover, _a, ctx) {\n        var above = _a.above;\n        return above(item, hover, computeVertical(__assign(__assign({}, ctx), { hover: hover, level: hover.levels.above }), true));\n    },\n    _a[c.BA] = function (item, hover, _a, ctx) {\n        var below = _a.below;\n        return below(item, hover, computeVertical(__assign(__assign({}, ctx), { hover: hover, level: hover.levels.below })));\n    },\n    _a[c.LA] = function (item, hover, _a, ctx) {\n        var leftOf = _a.leftOf;\n        return leftOf(item, hover, computeHorizontal(__assign(__assign({}, ctx), { hover: hover, level: hover.levels.left }), true));\n    },\n    _a[c.RA] = function (item, hover, _a, ctx) {\n        var rightOf = _a.rightOf;\n        return rightOf(item, hover, computeHorizontal(__assign(__assign({}, ctx), { hover: hover, level: hover.levels.right })));\n    },\n    /* inline */\n    _a[c.IL] = function (item, hover, _a) {\n        var inlineLeft = _a.inlineLeft, leftOf = _a.leftOf;\n        if (isRow(item) || isRow(hover)) {\n            return;\n        }\n        var inline = hover.inline, hasInlineNeighbour = hover.hasInlineNeighbour;\n        var _b = item.content, _c = (_b === void 0 ? {} : _b).plugin, _d = (_c === void 0 ? {} : _c).isInlineable, isInlineable = _d === void 0 ? false : _d;\n        if (inline || !isInlineable) {\n            return leftOf(item, hover, 2);\n        }\n        if (hasInlineNeighbour && hasInlineNeighbour !== item.id) {\n            return leftOf(item, hover, 2);\n        }\n        if (hasInlineNeighbour &&\n            hasInlineNeighbour === item.id &&\n            item.inline === 'left') {\n            return leftOf(item, hover, 2);\n        }\n        inlineLeft(item, hover);\n    },\n    _a[c.IR] = function (item, hover, _a) {\n        var inlineRight = _a.inlineRight, rightOf = _a.rightOf;\n        if (isRow(item) || isRow(hover)) {\n            return;\n        }\n        var inline = hover.inline, hasInlineNeighbour = hover.hasInlineNeighbour;\n        var _b = item.content, _c = (_b === void 0 ? {} : _b).plugin, _d = (_c === void 0 ? {} : _c).isInlineable, isInlineable = _d === void 0 ? false : _d;\n        if (inline || !isInlineable) {\n            return rightOf(item, hover, 2);\n        }\n        if (hasInlineNeighbour && hasInlineNeighbour !== item.id) {\n            return rightOf(item, hover, 2);\n        }\n        if (hasInlineNeighbour &&\n            hasInlineNeighbour === item.id &&\n            item.inline === 'right') {\n            return rightOf(item, hover, 2);\n        }\n        inlineRight(item, hover);\n    },\n    _a);\n/**\n * The HoverService uses callbacks and matrices to compute hover logic.\n *\n * @class HoverService\n */\nvar HoverService = /** @class */ (function () {\n    function HoverService(_a) {\n        var _b = _a === void 0 ? {} : _a, matrices = _b.matrices, callbacks = _b.callbacks;\n        this.callbacks = defaultCallbacks;\n        this.matrices = defaultMatrices;\n        this.matrices = matrices || this.matrices;\n        this.callbacks = callbacks || this.callbacks;\n    }\n    HoverService.prototype.hover = function (drag, hover, actions, _a) {\n        var room = _a.room, mouse = _a.mouse, _b = _a.matrix, use = _b === void 0 ? '10x10' : _b;\n        return computeHover(drag, hover, actions, {\n            room: room,\n            mouse: mouse,\n            matrix: this.matrices[use],\n            callbacks: this.callbacks,\n        }, use);\n    };\n    return HoverService;\n}());\nexport default HoverService;\n//# sourceMappingURL=index.js.map","import HoverService from '../hover';\nvar hoverService = new HoverService();\nvar computeCurrentDropPosition = function (actions, hover, drag, monitor, element, matrixName) {\n    var mousePosition = monitor.getClientOffset();\n    var componentPosition = element.getBoundingClientRect();\n    var room = {\n        height: componentPosition.bottom - componentPosition.top,\n        width: componentPosition.right - componentPosition.left,\n    };\n    var mouse = {\n        y: mousePosition.y - componentPosition.top,\n        x: mousePosition.x - componentPosition.left,\n    };\n    hoverService.hover(drag, hover, actions, { room: room, mouse: mouse, matrix: matrixName });\n};\nexport var computeAndDispatchInsert = function (hover, drag, monitor, element, actions, matrixName) {\n    if (matrixName === void 0) { matrixName = '10x10'; }\n    return computeCurrentDropPosition(actions, hover, drag, monitor, element, matrixName);\n};\nexport var computeAndDispatchHover = function (hover, drag, monitor, element, actions, matrixName) {\n    if (matrixName === void 0) { matrixName = '10x10'; }\n    return computeCurrentDropPosition(actions, hover, drag, monitor, element, matrixName);\n};\n//# sourceMappingURL=input.js.map","import throttle from 'lodash.throttle';\nimport { delay } from '../../../../helper/throttle';\nimport { computeAndDispatchHover, computeAndDispatchInsert, } from '../../../../service/hover/input';\nimport logger from '../../../../service/logger';\nimport { isRow, } from '../../../../types/editable';\nvar last = { hoverId: '', dragId: '' };\nvar shouldClear = function (hoverId, dragId) {\n    if (hoverId === last.hoverId && dragId === last.dragId) {\n        return false;\n    }\n    last = { hoverId: hoverId, dragId: dragId };\n    return true;\n};\nexport var onHover = throttle(function (target, monitor, element, actions) {\n    var _a, _b, _c;\n    var drag = monitor.getItem();\n    if (!drag) {\n        // item undefined, happens when throttle triggers after drop\n        return;\n    }\n    if (drag.cell.id === target.id) {\n        // If hovering over itself, do nothing\n        if (shouldClear(target.id, drag.cell.id)) {\n            actions.clear();\n        }\n        return;\n    }\n    else if (!monitor.isOver({ shallow: true })) {\n        // If hovering over ancestor cell, do nothing (we are going to propagate later in the tree anyways)\n        return;\n    }\n    else if (target.ancestors.some(function (a) { return a.id === drag.cell.id; })) {\n        if (shouldClear(target.id, drag.cell.id)) {\n            actions.clear();\n        }\n        return;\n    }\n    else if (!target.id) {\n        // If hovering over something that isn't a cell or hasn't an id, do nothing. Should be an edge case\n        logger.warn('Canceled cell drop, no id given.', target, drag);\n        return;\n    }\n    last = { hoverId: target.id, dragId: drag.cell.id };\n    var allowInlineNeighbours = (_c = (!isRow(target) && ((_b = (_a = target === null || target === void 0 ? void 0 : target.content) === null || _a === void 0 ? void 0 : _a.plugin) === null || _b === void 0 ? void 0 : _b.allowInlineNeighbours))) !== null && _c !== void 0 ? _c : false;\n    computeAndDispatchHover(target, drag.cell, monitor, element, actions, \"10x10\" + (allowInlineNeighbours ? '' : '-no-inline'));\n}, delay, { leading: false });\nexport var onDrop = function (targetCell, monitor, element, actions) {\n    var _a, _b, _c;\n    var drag = monitor.getItem();\n    //  console.log('on drop', targetCell, monitor);\n    if (monitor.didDrop() || !monitor.isOver({ shallow: true })) {\n        // If the item drop occurred deeper down the tree, don't do anything\n        return;\n    }\n    else if (drag.cell.id === targetCell.id) {\n        // If the item being dropped on itself do nothing\n        actions.cancelCellDrag();\n        return;\n    }\n    else if (targetCell.ancestors.some(function (a) { return a.id === drag.cell.id; })) {\n        // If hovering over a child of itself, don't propagate further\n        actions.cancelCellDrag();\n        return;\n    }\n    last = { hoverId: targetCell.id, dragId: drag.cell.id };\n    var allowInlineNeighbours = (_c = (!isRow(targetCell) && ((_b = (_a = targetCell === null || targetCell === void 0 ? void 0 : targetCell.content) === null || _a === void 0 ? void 0 : _a.plugin) === null || _b === void 0 ? void 0 : _b.allowInlineNeighbours))) !== null && _c !== void 0 ? _c : false;\n    computeAndDispatchInsert(targetCell, drag.cell, monitor, element, actions, \"10x10\" + (allowInlineNeighbours ? '' : '-no-inline'));\n};\n//# sourceMappingURL=dnd.js.map","var __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport classNames from 'classnames';\nimport * as React from 'react';\nimport { useDrop } from 'react-dnd';\nimport { useDropActions, useHoverActions, useIsInsertMode, useIsLayoutMode, useNode, useOptions, } from '../../hooks';\nimport { onDrop, onHover } from './helper/dnd';\nexport var useCellDrop = function (nodeId) {\n    var ref = React.useRef(null);\n    var node = useNode(nodeId);\n    var hoverActions = useHoverActions();\n    var dropActions = useDropActions();\n    var _a = __read(useDrop({\n        accept: 'cell',\n        canDrop: function (item) {\n            return (item.cell.id !== node.id &&\n                !node.ancestors.some(function (a) { return a.id === item.cell.id; }));\n        },\n        hover: function (item, monitor) {\n            onHover(node, monitor, ref.current, hoverActions);\n        },\n        drop: function (item, monitor) {\n            onDrop(node, monitor, ref.current, dropActions);\n        },\n    }), 2), dropRef = _a[1];\n    // see https://github.com/react-dnd/react-dnd/issues/1955\n    var attach = React.useCallback(function (domElement) {\n        dropRef(domElement);\n        ref.current = domElement;\n        // use dom element here for measuring\n    }, [dropRef]);\n    return attach;\n};\nvar Droppable = function (props) {\n    var _a;\n    var isLayoutMode = useIsLayoutMode();\n    var isInsertMode = useIsInsertMode();\n    var attach = useCellDrop(props.nodeId);\n    var node = useNode(props.nodeId);\n    var options = useOptions();\n    if (!(isLayoutMode || isInsertMode) && !options.allowMoveInEditMode) {\n        return (React.createElement(\"div\", { className: 'ory-cell-droppable-container' }, props.children));\n    }\n    return (React.createElement(\"div\", { ref: attach, className: classNames('ory-cell-droppable', (_a = {\n                'ory-cell-droppable-is-over-current': node.hoverPosition\n            },\n            _a[\"ory-cell-droppable-is-over-\" + node.hoverPosition] = node.hoverPosition,\n            _a['ory-cell-droppable-leaf'] = props.isLeaf,\n            _a)) }, props.children));\n};\nexport default Droppable;\n//# sourceMappingURL=index.js.map","import * as React from 'react';\nimport { useCellDrop } from '../../Cell/Droppable';\nimport { useIsInsertMode, useIsLayoutMode } from '../../hooks';\nvar Droppable = function (_a) {\n    var children = _a.children, nodeId = _a.nodeId;\n    var isLayoutMode = useIsLayoutMode();\n    var isInsertMode = useIsInsertMode();\n    var ref = useCellDrop(nodeId);\n    if (!(isLayoutMode || isInsertMode)) {\n        return React.createElement(\"div\", { className: \"ory-row-droppable-container\" }, children);\n    }\n    return (React.createElement(\"div\", { ref: ref, className: \"ory-row-droppable\" }, children));\n};\nexport default Droppable;\n//# sourceMappingURL=index.js.map","var __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport * as React from 'react';\nimport Droppable from './Droppable';\nimport classNames from 'classnames';\nimport { useMeasure } from 'react-use';\nimport Cell from '../Cell';\nimport { useBlurAllCells, useRow } from '../hooks';\nvar rowHasInlineChildren = function (_a) {\n    var cells = _a.cells;\n    return Boolean(cells.length === 2 && Boolean(cells[0].inline));\n};\nvar Row = function (_a) {\n    var _b;\n    var nodeId = _a.nodeId;\n    var _c = __read(useMeasure(), 2), ref = _c[0], width = _c[1].width;\n    var node = useRow(nodeId);\n    var blurAllCells = useBlurAllCells();\n    return (React.createElement(Droppable, { nodeId: nodeId },\n        React.createElement(\"div\", { ref: ref, className: classNames('ory-row', (_b = {\n                    'ory-row-is-hovering-this': Boolean(node.hoverPosition)\n                },\n                _b[\"ory-row-is-hovering-\" + (node.hoverPosition || '')] = Boolean(node.hoverPosition),\n                _b['ory-row-has-floating-children'] = rowHasInlineChildren(node),\n                _b)), onClick: blurAllCells }, node.cells.map(function (c) { return (React.createElement(Cell, { nodeId: c.id, rowWidth: width, key: c.id })); }))));\n};\nexport default React.memo(Row);\n//# sourceMappingURL=index.js.map","import * as React from 'react';\nimport { useCell, useCellData, useEditableId, useFocusCell, useIsEditMode, useIsFocused, useIsPreviewMode, useLang, useRemoveCell, useUpdateCellLayout, } from '../../hooks';\nimport Row from '../../Row';\nvar Layout = function (_a) {\n    var nodeId = _a.nodeId;\n    var node = useCell(nodeId);\n    var lang = useLang();\n    var editableId = useEditableId();\n    var isPreviewMode = useIsPreviewMode();\n    var isEditMode = useIsEditMode();\n    var updateCellLayout = useUpdateCellLayout(node.id);\n    var cellData = useCellData(node);\n    var focus = useFocusCell(node.id);\n    var focused = useIsFocused(node.id);\n    var ref = React.useRef();\n    var Component = node.layout.plugin.Component;\n    var remove = useRemoveCell(node.id);\n    var onMouseDown = React.useCallback(function (e) {\n        if (!focused &&\n            e.target.closest('.ory-cell-inner') ===\n                // eslint-disable-next-line react/no-find-dom-node\n                ref.current) {\n            focus(false, 'onMouseDown');\n        }\n        return true;\n    }, [node]);\n    return (React.createElement(\"div\", { onMouseDown: !isPreviewMode ? onMouseDown : undefined, tabIndex: -1, className: \"ory-cell-inner\", ref: ref },\n        React.createElement(Component, { editable: editableId, cell: node, nodeId: nodeId, lang: lang, state: cellData, pluginConfig: node.layout.plugin, focused: isEditMode && focused, readOnly: !isEditMode, onChange: updateCellLayout, isEditMode: isEditMode, isPreviewMode: isPreviewMode, remove: remove }, node.rows.map(function (r) { return (React.createElement(Row, { nodeId: r.id, key: r.id })); }))));\n};\nexport default Layout;\n//# sourceMappingURL=index.js.map","import * as React from 'react';\nimport { useCell } from '../../..';\nimport Row from '../../../components/Row';\nvar Rows = function (_a) {\n    var nodeId = _a.nodeId;\n    var cell = useCell(nodeId);\n    var _b = cell.rows, rows = _b === void 0 ? [] : _b;\n    return (React.createElement(\"div\", { className: \"ory-cell-inner ory-cell-rows\" }, rows.map(function (r) { return (React.createElement(Row, { nodeId: r.id, key: r.id })); })));\n};\nexport default React.memo(Rows);\n//# sourceMappingURL=index.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport * as React from 'react';\nimport { useCell } from '../../hooks';\nimport Content from '../Content';\nimport Draggable from '../Draggable';\nimport Droppable from '../Droppable';\nimport ErrorCell from '../ErrorCell';\nimport Layout from '../Layout';\nimport Rows from '../Rows';\nvar Inner = function (props) {\n    var node = useCell(props.nodeId);\n    var _a = node.rows, rows = _a === void 0 ? [] : _a, _b = node.layout, _c = (_b === void 0 ? {} : _b).plugin, _d = (_c === void 0 ? {} : _c).Component, LayoutComponent = _d === void 0 ? undefined : _d, _e = node.content, _f = (_e === void 0 ? {} : _e).plugin, _g = (_f === void 0 ? {} : _f).Component, ContentComponent = _g === void 0 ? undefined : _g;\n    if (rows.length && LayoutComponent) {\n        return (React.createElement(Droppable, __assign({}, props),\n            React.createElement(Draggable, __assign({}, props),\n                React.createElement(Layout, __assign({}, props)))));\n    }\n    else if (rows.length) {\n        return (React.createElement(Droppable, __assign({}, props),\n            React.createElement(Rows, __assign({}, props))));\n    }\n    else if (ContentComponent) {\n        return (React.createElement(Droppable, __assign({}, props, { isLeaf: true }),\n            React.createElement(Draggable, __assign({}, props, { isLeaf: true }),\n                React.createElement(Content, __assign({}, props)))));\n    }\n    return (React.createElement(ErrorCell, { node: node, error: new Error('The content plugin could not be found.') }));\n};\nexport default React.memo(Inner);\n//# sourceMappingURL=index.js.map","export var computeStepWidth = function (_a) {\n    var rowWidth = _a.rowWidth, steps = _a.steps;\n    return Math.round(rowWidth / (steps || 12));\n};\nexport var widthToSize = function (_a, result) {\n    var stepWidth = _a.stepWidth, steps = _a.steps, inline = _a.inline;\n    var size = Math.round(result.width / stepWidth);\n    if (inline === 'right') {\n        size = steps - size;\n    }\n    if (size > steps) {\n        size = steps;\n    }\n    else if (size < 1) {\n        size = 1;\n    }\n    return size;\n};\n//# sourceMappingURL=helper.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport classNames from 'classnames';\nimport throttle from 'lodash/throttle';\nimport * as React from 'react';\nimport { Resizable as ReactResizeable } from 'react-resizable';\nimport { computeStepWidth, widthToSize } from './helper';\nvar Resizable = /** @class */ (function (_super) {\n    __extends(Resizable, _super);\n    function Resizable(props) {\n        var _this = _super.call(this, props) || this;\n        _this.onChangeSize = function (size) {\n            if (isNaN(size.width)) {\n                return;\n            }\n            var newSize = widthToSize({\n                steps: _this.state.steps,\n                stepWidth: _this.state.stepWidth,\n                inline: _this.props.node.inline,\n            }, size);\n            _this.props.onChange(newSize);\n        };\n        _this.onResize = function (event, _a) {\n            var size = _a.size;\n            if (isNaN(size.width)) {\n                return;\n            }\n            _this.setState({ width: size.width });\n            _this.onChangeSizeThrottled(size);\n        };\n        _this.onResizeStop = function (event, _a) {\n            var size = _a.size;\n            if (isNaN(size.width)) {\n                return;\n            }\n            _this.onChangeSize(size);\n            var newSize = widthToSize({\n                steps: _this.state.steps,\n                stepWidth: _this.state.stepWidth,\n                inline: _this.props.node.inline,\n            }, size);\n            _this.setState({ width: newSize * _this.state.stepWidth });\n        };\n        var sw = computeStepWidth({\n            rowWidth: props.rowWidth,\n            steps: props.node.size,\n        });\n        _this.onChangeSizeThrottled = throttle(_this.onChangeSize, 100);\n        _this.state = {\n            stepWidth: sw,\n            width: props.node.size * sw,\n            steps: props.steps - 1 || 11,\n        };\n        return _this;\n    }\n    Resizable.prototype.render = function () {\n        var _a;\n        var _b = this.props, _c = _b.node, bounds = _c.bounds, inline = _c.inline, children = _b.children;\n        return (React.createElement(ReactResizeable, { className: classNames('ory-cell-inner', 'ory-cell-resizable', (_a = {},\n                _a[\"ory-cell-resizable-inline-\" + (inline || '')] = inline,\n                _a)), onResize: this.onResize, onResizeStop: this.onResizeStop, minConstraints: inline ? null : [this.state.stepWidth, Infinity], maxConstraints: inline ? null : [bounds.right * this.state.stepWidth, Infinity], draggableOpts: { axis: 'none', offsetParent: document.body }, width: this.state.width, height: 0 },\n            React.createElement(\"div\", null, children)));\n    };\n    return Resizable;\n}(React.PureComponent));\nexport default Resizable;\n//# sourceMappingURL=index.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport classNames from 'classnames';\nimport * as React from 'react';\nimport { useCell, useIsEditMode, useIsFocused, useIsLayoutMode, useIsPreviewMode, useIsResizeMode, useLang, useOptions, useResizeCell, } from '../hooks';\nimport ErrorCell from './ErrorCell';\nimport Inner from './Inner';\nimport Resizable from './Resizable';\nvar gridClass = function (_a) {\n    var isPreviewMode = _a.isPreviewMode, isEditMode = _a.isEditMode, size = _a.size;\n    if (isPreviewMode || isEditMode) {\n        return \"ory-cell-\" + (isPreviewMode || isEditMode ? 'sm' : 'xs') + \"-\" + (size || 12) + \" ory-cell-xs-12\";\n    }\n    return \"ory-cell-xs-\" + (size || 12);\n};\nvar stopClick = function (_isEditMode) { return function (e) { return (_isEditMode ? e.stopPropagation() : null); }; };\nvar CellErrorGate = /** @class */ (function (_super) {\n    __extends(class_1, _super);\n    function class_1() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.state = {\n            error: null,\n        };\n        return _this;\n    }\n    class_1.prototype.componentDidCatch = function (error) {\n        this.setState({ error: error });\n    };\n    class_1.prototype.render = function () {\n        if (this.state.error) {\n            return React.createElement(ErrorCell, { node: this.props.node, error: this.state.error });\n        }\n        return this.props.children;\n    };\n    return class_1;\n}(React.Component));\nvar Cell = function (_a) {\n    var _b;\n    var _c;\n    var nodeId = _a.nodeId, rowWidth = _a.rowWidth;\n    var node = useCell(nodeId);\n    var focused = useIsFocused(nodeId);\n    var inline = node.inline, hasInlineNeighbour = node.hasInlineNeighbour, isDraft = node.isDraft, isDraftI18n = node.isDraftI18n, size = node.size, resizable = node.resizable;\n    var lang = useLang();\n    var isPreviewMode = useIsPreviewMode();\n    var isResizeMode = useIsResizeMode();\n    var isEditMode = useIsEditMode();\n    var isLayoutMode = useIsLayoutMode();\n    var allowResizeInEditMode = useOptions().allowResizeInEditMode;\n    var resizeCell = useResizeCell(nodeId);\n    var isDraftInLang = (_c = isDraftI18n === null || isDraftI18n === void 0 ? void 0 : isDraftI18n[lang]) !== null && _c !== void 0 ? _c : isDraft;\n    //useWhyDidYouUpdate('cell', { nodeId, rowWidth });\n    if (isDraftInLang && isPreviewMode) {\n        return null;\n    }\n    return (React.createElement(\"div\", { className: classNames('ory-cell', gridClass({\n            isEditMode: isEditMode,\n            isPreviewMode: isPreviewMode,\n            size: size,\n        }), (_b = {\n                'ory-cell-has-inline-neighbour': hasInlineNeighbour\n            },\n            _b[\"ory-cell-inline-\" + (inline || '')] = inline,\n            _b['ory-cell-focused'] = focused,\n            _b['ory-cell-is-draft'] = isDraftInLang,\n            _b['ory-cell-resizing-overlay'] = isResizeMode,\n            _b['ory-cell-bring-to-front'] = !isResizeMode && !isLayoutMode && inline,\n            _b)), onClick: stopClick(isEditMode) },\n        React.createElement(CellErrorGate, { node: node }, resizable && (isResizeMode || allowResizeInEditMode) && rowWidth ? (React.createElement(Resizable, { rowWidth: rowWidth, node: node, steps: 12, onChange: resizeCell },\n            React.createElement(Inner, { nodeId: nodeId }))) : (React.createElement(Inner, { nodeId: nodeId })))));\n};\nexport default React.memo(Cell);\n//# sourceMappingURL=index.js.map","var __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport throttle from 'lodash.throttle';\nimport { useMeasure } from 'react-use';\nimport * as React from 'react';\nimport { useCallback, useEffect } from 'react';\nimport { useEditableNode } from '../../..';\nimport { createFallbackCell } from '../../../actions/cell';\nimport scrollIntoViewWithOffset from '../../../components/Cell/utils/scrollIntoViewWithOffset';\nimport Cell from '../../Cell';\nimport { useRef } from 'react';\nimport { useDispatch } from '../../../reduxConnect';\nfunction isElementInViewport(el) {\n    var rect = el.getBoundingClientRect();\n    return (rect.top >= 0 &&\n        rect.left >= 0 &&\n        rect.bottom <=\n            (window.innerHeight ||\n                document.documentElement.clientHeight) /*or $(window).height() */ &&\n        rect.right <=\n            (window.innerWidth ||\n                document.documentElement.clientWidth) /*or $(window).width() */);\n}\nvar Inner = function (_a) {\n    var _b;\n    var defaultPlugin = _a.defaultPlugin;\n    var node = useEditableNode();\n    var ref = useRef();\n    var _c = __read(useMeasure(), 2), sizeRef = _c[0], width = _c[1].width;\n    var cells = (_b = node === null || node === void 0 ? void 0 : node.cells) !== null && _b !== void 0 ? _b : [];\n    var firstElementInViewPortref = React.useRef();\n    useEffect(function () {\n        var onScroll = throttle(function () {\n            if (ref.current) {\n                var firstInViewport = Array.prototype.find.call(ref.current.getElementsByClassName('ory-cell'), function (cell) { return isElementInViewport(cell); });\n                if (firstInViewport) {\n                    firstElementInViewPortref.current = {\n                        el: firstInViewport,\n                        topOffset: firstInViewport.getBoundingClientRect().top,\n                    };\n                }\n                else {\n                    firstElementInViewPortref.current = null;\n                }\n            }\n        }, 600);\n        window.addEventListener('scroll', onScroll);\n        return function () {\n            window.removeEventListener('scroll', onScroll);\n        };\n    });\n    var dispatch = useDispatch();\n    var createFallback = useCallback(function (plugin) {\n        dispatch(createFallbackCell(plugin, node === null || node === void 0 ? void 0 : node.id));\n    }, [dispatch, node === null || node === void 0 ? void 0 : node.id]);\n    var shouldCreateFallbackCell = node && cells.length === 0;\n    useEffect(function () {\n        if (shouldCreateFallbackCell) {\n            createFallback(defaultPlugin);\n        }\n    }, [shouldCreateFallbackCell]);\n    useEffect(function () {\n        if (firstElementInViewPortref.current) {\n            var _a = firstElementInViewPortref.current, el_1 = _a.el, topOffset_1 = _a.topOffset;\n            setTimeout(function () {\n                scrollIntoViewWithOffset(el_1, topOffset_1, 'auto');\n            }, 0);\n        }\n    }, [firstElementInViewPortref.current]);\n    if (!node) {\n        return null;\n    }\n    return (React.createElement(\"div\", { ref: sizeRef },\n        React.createElement(\"div\", { ref: ref, className: \"ory-editable\" }, cells.map(function (cell) { return (React.createElement(Cell, { nodeId: cell.id, rowWidth: width, key: cell.id })); }))));\n};\nexport default Inner;\n//# sourceMappingURL=index.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport React, { useEffect, useRef } from 'react';\nimport { editable } from '../../selector/editable';\nimport deepEquals from '../../utils/deepEquals';\nimport { EditableContext, OptionsContext, useEditor } from '../hooks';\nimport HotKeyDecorator from '../HotKey/Decorator';\nimport FallbackDropArea from './FallbackDropArea';\nimport Inner from './Inner';\nvar Editable = function (_a) {\n    var id = _a.id, onChange = _a.onChange, onChangeLang = _a.onChangeLang, lang = _a.lang, simplifiedModeProps = __rest(_a, [\"id\", \"onChange\", \"onChangeLang\", \"lang\"]);\n    var editor = useEditor();\n    // update lang when changed from outside\n    useEffect(function () {\n        editor.setLang(lang);\n    }, [lang, editor]);\n    var previousSerializedRef = useRef();\n    useEffect(function () {\n        var oldLang = lang;\n        var handleChanges = function () {\n            // notify outsiders to new language, when chagned in ui\n            var newLang = editor.store.getState().reactPage.settings.lang;\n            if (newLang !== oldLang || newLang !== lang) {\n                oldLang = newLang;\n                onChangeLang === null || onChangeLang === void 0 ? void 0 : onChangeLang(newLang);\n            }\n            // check also if lang has changed internally, to call callback when controled from outside\n            var state = editable(editor.store.getState(), {\n                id: id,\n            });\n            if (!state) {\n                return;\n            }\n            // prevent uneeded updates\n            var serialized = editor.plugins.serialize(state);\n            var serializedEqual = deepEquals(previousSerializedRef.current, serialized);\n            if (serializedEqual) {\n                return;\n            }\n            previousSerializedRef.current = serialized;\n            onChange(serialized);\n        };\n        var unsubscribe = editor.store.subscribe(handleChanges);\n        return function () {\n            unsubscribe();\n        };\n    }, [editor, id, onChange]);\n    return (React.createElement(OptionsContext.Provider, { value: simplifiedModeProps },\n        React.createElement(EditableContext.Provider, { value: id },\n            React.createElement(HotKeyDecorator, null,\n                React.createElement(FallbackDropArea, null,\n                    React.createElement(Inner, { id: id, defaultPlugin: editor.defaultPlugin }))))));\n};\nexport default React.memo(Editable);\n//# sourceMappingURL=index.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { createEmptyState, Editable, Editor, Provider, deepEquals, } from '@react-page/core';\nimport EditorUI from '@react-page/ui';\nimport React, { useEffect, useRef, useCallback } from 'react';\nimport StickyWrapper from './StickyWrapper';\nvar EditableEditor = function (_a) {\n    var plugins = _a.plugins, defaultPlugin = _a.defaultPlugin, value = _a.value, onChange = _a.onChange, dndBackend = _a.dndBackend, defaultDisplayMode = _a.defaultDisplayMode, blurGateDisabled = _a.blurGateDisabled, lang = _a.lang, languages = _a.languages, onChangeLang = _a.onChangeLang, hideEditorSidebar = _a.hideEditorSidebar, rest = __rest(_a, [\"plugins\", \"defaultPlugin\", \"value\", \"onChange\", \"dndBackend\", \"defaultDisplayMode\", \"blurGateDisabled\", \"lang\", \"languages\", \"onChangeLang\", \"hideEditorSidebar\"]);\n    var theValue = value || createEmptyState();\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    var lastValueRef = useRef();\n    var editorRef = useRef(new Editor({ defaultPlugin: defaultPlugin, plugins: plugins, languages: languages, lang: lang }));\n    var onChangeCallback = useCallback(function (newValue) {\n        lastValueRef.current = newValue;\n        onChange(newValue);\n    }, [onChange]);\n    var equal = deepEquals(theValue, lastValueRef === null || lastValueRef === void 0 ? void 0 : lastValueRef.current);\n    useEffect(function () {\n        if (!equal) {\n            lastValueRef.current = theValue;\n            editorRef.current.update(theValue);\n        }\n    }, [equal]);\n    var editor = editorRef.current;\n    return (React.createElement(Provider, { editor: editor, dndBackend: dndBackend, blurGateDisabled: blurGateDisabled, blurGateDefaultMode: defaultDisplayMode },\n        React.createElement(StickyWrapper, null, function (stickyNess) { return (React.createElement(React.Fragment, null,\n            React.createElement(Editable, __assign({ lang: lang, onChangeLang: onChangeLang, id: theValue === null || theValue === void 0 ? void 0 : theValue.id, onChange: onChangeCallback }, rest)),\n            React.createElement(EditorUI, { stickyNess: stickyNess, hideEditorSidebar: hideEditorSidebar }))); })));\n};\nexport default EditableEditor;\n//# sourceMappingURL=EditableEditor.js.map","// something is wrong with lerna, typescript and this import: import { lazyLoad } from '@react-page/core';\nimport loadable from '@loadable/component';\nimport { colorToString } from './ColorPicker/colorToString';\nimport darkTheme from './ThemeProvider/DarkTheme';\nvar Trash = loadable(function () { return import('./Trash/index'); });\nvar PluginDrawer = loadable(function () { return import('./PluginDrawer/index'); });\nvar DisplayModeToggle = loadable(function () { return import('./DisplayModeToggle/index'); });\nvar BottomToolbar = loadable(function () { return import('./BottomToolbar/index'); });\nvar EditorUI = loadable(function () { return import('./EditorUI/index'); });\nvar ThemeProvider = loadable(function () { return import('./ThemeProvider/index'); });\nvar ImageUpload = loadable(function () { return import('./ImageUpload/index'); });\nvar ColorPicker = loadable(function () { return import('./ColorPicker/index'); });\nexport default EditorUI;\nexport { EditorUI, Trash, PluginDrawer, DisplayModeToggle, BottomToolbar, ThemeProvider, darkTheme, ImageUpload, ColorPicker, colorToString, };\nvar Toolbar = PluginDrawer;\n/**\n * @deprecated, use PluginDrawer instead\n */\nexport { Toolbar };\n//# sourceMappingURL=index.js.map"],"sourceRoot":""}